<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- SEO Meta Tags -->
    <meta name="description" content="At bakımı, eğitimi, yarış dünyası hakkında uzman içerikler ve rehberler.">
    <meta name="keywords" content="at satışı, yarış atı, safkan at, at ilanları, equimarket, türkiye at pazarı">
    <meta name="robots" content="index, follow">
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Blog - EquiMarket">
    <meta property="og:description" content="At bakımı, eğitimi, yarış dünyası hakkında uzman içerikler ve rehberler.">
    <meta property="og:url" content="https://equimarket.com.tr/blog">
    <meta property="og:site_name" content="EquiMarket">
    <meta property="og:locale" content="tr_TR">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Blog - EquiMarket">
    <meta name="twitter:description" content="At bakımı, eğitimi, yarış dünyası hakkında uzman içerikler ve rehberler.">
    <link rel="canonical" href="https://equimarket.com.tr/blog">
    <title>Blog - EquiMarket</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=DM+Sans:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --racing-green: #1a3d2e;
            --racing-green-light: #2d5a47;
            --gold: #c9a55c;
            --gold-light: #e8d5a8;
            --cream: #faf8f3;
            --charcoal: #2a2a2a;
            --warm-gray: #6b6b6b;
            --light-gray: #f5f4f0;
            --white: #fff;
            --shadow-soft: 0 4px 20px rgba(26, 61, 46, .08);
            --shadow-medium: 0 8px 40px rgba(26, 61, 46, .12)
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--cream);
            color: var(--charcoal);
            line-height: 1.6
        }

        h1,
        h2,
        h3,
        h4 {
            font-family: 'Playfair Display', serif;
            font-weight: 600
        }

        /* Header */
        .header {
            background: var(--white);
            padding: 16px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-soft)
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            align-items: center;
            justify-content: space-between
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--racing-green);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center
        }

        .logo-icon svg {
            width: 24px;
            height: 24px;
            fill: none;
            stroke: var(--gold);
            stroke-width: 1.5
        }

        .logo-text {
            font-family: 'Playfair Display', serif;
            font-size: 22px;
            font-weight: 700;
            color: var(--charcoal)
        }

        .logo-text span {
            color: var(--gold)
        }

        .nav {
            display: flex;
            gap: 32px
        }

        .nav a {
            text-decoration: none;
            color: var(--warm-gray);
            font-weight: 500;
            transition: color .2s
        }

        .nav a:hover,
        .nav a.active {
            color: var(--racing-green)
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 16px
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            border: none;
            transition: all .2s
        }

        .btn-primary {
            background: var(--racing-green);
            color: var(--white)
        }

        .btn-primary:hover {
            background: var(--racing-green-light)
        }

        /* Hero */
        .hero {
            background: linear-gradient(135deg, var(--racing-green) 0%, var(--racing-green-light) 100%);
            padding: 80px 0;
            text-align: center;
            color: var(--white)
        }

        .hero h1 {
            font-size: 48px;
            margin-bottom: 16px
        }

        .hero p {
            font-size: 18px;
            opacity: .9;
            max-width: 600px;
            margin: 0 auto
        }

        /* Main */
        .main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 60px 24px
        }

        /* Filters */
        .filters {
            display: flex;
            gap: 16px;
            margin-bottom: 40px;
            flex-wrap: wrap;
            align-items: center
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            position: relative
        }

        .search-box input {
            width: 100%;
            padding: 14px 16px 14px 48px;
            border: 2px solid var(--light-gray);
            border-radius: 12px;
            font-size: 15px;
            background: var(--white)
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--gold)
        }

        .search-box svg {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            stroke: var(--warm-gray);
            fill: none;
            stroke-width: 2
        }

        .category-tabs {
            display: flex;
            gap: 8px;
            flex-wrap: wrap
        }

        .cat-btn {
            padding: 10px 20px;
            border: none;
            background: var(--white);
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            color: var(--warm-gray);
            transition: all .2s;
            border: 1px solid var(--light-gray)
        }

        .cat-btn:hover {
            border-color: var(--racing-green);
            color: var(--racing-green)
        }

        .cat-btn.active {
            background: var(--racing-green);
            color: var(--white);
            border-color: var(--racing-green)
        }

        /* Featured */
        .featured-section {
            margin-bottom: 60px
        }

        .section-title {
            font-size: 28px;
            margin-bottom: 24px;
            color: var(--charcoal)
        }

        .featured-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px
        }

        .featured-main {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            background: var(--light-gray);
            min-height: 400px
        }

        .featured-main img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            inset: 0
        }

        .featured-main .overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, .8) 0%, transparent 60%);
            padding: 32px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end
        }

        .featured-main .cat-tag {
            display: inline-block;
            background: var(--gold);
            color: var(--charcoal);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 12px;
            width: fit-content
        }

        .featured-main h2 {
            font-size: 32px;
            color: var(--white);
            margin-bottom: 12px
        }

        .featured-main p {
            color: rgba(255, 255, 255, .8);
            font-size: 15px;
            margin-bottom: 16px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden
        }

        .featured-main .meta {
            display: flex;
            gap: 16px;
            color: rgba(255, 255, 255, .7);
            font-size: 13px
        }

        .featured-side {
            display: flex;
            flex-direction: column;
            gap: 16px
        }

        .featured-small {
            position: relative;
            border-radius: 16px;
            overflow: hidden;
            background: var(--light-gray);
            flex: 1;
            min-height: 190px
        }

        .featured-small img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            inset: 0
        }

        .featured-small .overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, .7) 0%, transparent 50%);
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end
        }

        .featured-small h3 {
            font-size: 18px;
            color: var(--white);
            margin-bottom: 8px
        }

        .featured-small .meta {
            color: rgba(255, 255, 255, .7);
            font-size: 12px
        }

        /* Blog Grid */
        .blog-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 32px;
            margin-bottom: 48px
        }

        .blog-card {
            background: var(--white);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow-soft);
            transition: all .3s
        }

        .blog-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-medium)
        }

        .blog-card-image {
            height: 200px;
            background: var(--light-gray);
            position: relative;
            overflow: hidden
        }

        .blog-card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform .3s
        }

        .blog-card:hover .blog-card-image img {
            transform: scale(1.05)
        }

        .blog-card-image .cat-tag {
            position: absolute;
            top: 16px;
            left: 16px;
            background: var(--gold);
            color: var(--charcoal);
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase
        }

        .blog-card-content {
            padding: 24px
        }

        .blog-card h3 {
            font-size: 20px;
            margin-bottom: 12px;
            color: var(--charcoal);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden
        }

        .blog-card p {
            color: var(--warm-gray);
            font-size: 14px;
            margin-bottom: 16px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden
        }

        .blog-card .meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            color: var(--warm-gray)
        }

        .blog-card .author {
            display: flex;
            align-items: center;
            gap: 8px
        }

        .blog-card .author-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--racing-green);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 600
        }

        .blog-card a {
            text-decoration: none;
            color: inherit
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 8px
        }

        .page-btn {
            width: 40px;
            height: 40px;
            border: 1px solid var(--light-gray);
            background: var(--white);
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all .2s
        }

        .page-btn:hover {
            border-color: var(--racing-green);
            color: var(--racing-green)
        }

        .page-btn.active {
            background: var(--racing-green);
            color: var(--white);
            border-color: var(--racing-green)
        }

        .page-btn:disabled {
            opacity: .5;
            cursor: not-allowed
        }

        /* Empty */
        .empty-state {
            text-align: center;
            padding: 80px;
            background: var(--white);
            border-radius: 20px
        }

        .empty-state svg {
            width: 80px;
            height: 80px;
            fill: none;
            stroke: var(--warm-gray);
            stroke-width: 1;
            margin-bottom: 24px;
            opacity: .5
        }

        .empty-state h3 {
            font-size: 24px;
            margin-bottom: 12px
        }

        .empty-state p {
            color: var(--warm-gray)
        }

        /* Footer */
        .footer {
            background: var(--racing-green);
            color: var(--white);
            padding: 60px 0 30px;
            margin-top: 80px
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px
        }

        .footer-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 48px;
            margin-bottom: 48px
        }

        .footer-brand h3 {
            font-size: 24px;
            margin-bottom: 16px
        }

        .footer-brand h3 span {
            color: var(--gold)
        }

        .footer-brand p {
            opacity: .8;
            font-size: 14px;
            line-height: 1.7
        }

        .footer-col h4 {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
            color: var(--gold)
        }

        .footer-col ul {
            list-style: none
        }

        .footer-col li {
            margin-bottom: 12px
        }

        .footer-col a {
            color: rgba(255, 255, 255, .8);
            text-decoration: none;
            font-size: 14px;
            transition: color .2s
        }

        .footer-col a:hover {
            color: var(--gold)
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, .1);
            padding-top: 30px;
            text-align: center;
            font-size: 14px;
            opacity: .7
        }

        @media(max-width:1024px) {
            .featured-grid {
                grid-template-columns: 1fr
            }

            .blog-grid {
                grid-template-columns: repeat(2, 1fr)
            }
        }

        @media(max-width:768px) {
            .header .nav {
                display: none
            }

            .hero h1 {
                font-size: 32px
            }

            .blog-grid {
                grid-template-columns: 1fr
            }

            .footer-grid {
                grid-template-columns: 1fr 1fr;
                gap: 32px
            }
        }
    
        .logo-img {
            height: 52px;
            width: auto;
            object-fit: contain;
        }
    </style>
</head>

<body>
    <header class="header">
        <div class="header-container">
            <a href="homepage_v2.html" class="logo">
                <img src="images/logo-horizontal.png" alt="EquiMarket" class="logo-img">
            </a>
            <nav class="nav">
                <a href="homepage_v2.html">Ana Sayfa</a>
                <a href="ilanlar.html">İlanlar</a>
                <a href="about.html">Hakkımızda</a>
                <a href="blog.html" class="active">Blog</a>
                <a href="contact.html">İletişim</a>
            </nav>
            <div class="header-actions">
                <a href="login_register.html" class="btn btn-primary">Giriş Yap</a>
            </div>
        </div>
    </header>

    <section class="hero">
        <h1>EquiMarket Blog</h1>
        <p>At bakımı, eğitimi, yarış dünyası ve daha fazlası hakkında uzman içerikler</p>
    </section>

    <main class="main">
        <div class="filters">
            <div class="search-box">
                <svg viewBox="0 0 24 24">
                    <circle cx="11" cy="11" r="8" />
                    <path d="m21 21-4.3-4.3" />
                </svg>
                <input type="text" id="searchInput" placeholder="Blog yazısı ara...">
            </div>
            <div class="category-tabs" id="categoryTabs">
                <button class="cat-btn active" data-cat="">Tümü</button>
            </div>
        </div>

        <section class="featured-section" id="featuredSection" style="display:none;">
            <h2 class="section-title">Öne Çıkanlar</h2>
            <div class="featured-grid" id="featuredGrid"></div>
        </section>

        <section>
            <h2 class="section-title">Son Yazılar</h2>
            <div class="blog-grid" id="blogGrid">
                <div class="empty-state" style="grid-column:1/-1">
                    <h3>Yükleniyor...</h3>
                </div>
            </div>
            <div class="pagination" id="pagination"></div>
        </section>
    </main>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <h3>Equi<span>Market</span></h3>
                    <p>Türkiye'nin en güvenilir at alım satım platformu. Kaliteli atlar, güvenli ticaret.</p>
                </div>
                <div class="footer-col">
                    <h4>Keşfet</h4>
                    <ul>
                        <li><a href="ilanlar.html">İlanlar</a></li>
                        <li><a href="about.html">Hakkımızda</a></li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="contact.html">İletişim</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Destek</h4>
                    <ul>
                        <li><a href="faq.html">SSS</a></li>
                        <li><a href="seller_guide.html">Satıcı Rehberi</a></li>
                        <li><a href="pricing.html">Fiyatlandırma</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Yasal</h4>
                    <ul>
                        <li><a href="terms.html">Kullanım Şartları</a></li>
                        <li><a href="privacy.html">Gizlilik</a></li>
                        <li><a href="kvkk.html">KVKK</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">© 2025 EquiMarket. Tüm hakları saklıdır.</div>
        </div>
    </footer>

    <script src="js/api.js"></script>
    <script>
        let currentPage = 1, currentCategory = '', totalPages = 1;
        const catLabels = { haberler: 'Haberler', rehber: 'Rehber', bakım: 'Bakım', eğitim: 'Eğitim', yarış: 'Yarış', sağlık: 'Sağlık', beslenme: 'Beslenme', ekipman: 'Ekipman', etkinlik: 'Etkinlik', diğer: 'Diğer' };

        document.addEventListener('DOMContentLoaded', () => {
            loadCategories();
            loadFeatured();
            loadBlogs();

            document.getElementById('searchInput').addEventListener('input', debounce(() => {
                currentPage = 1;
                loadBlogs();
            }, 300));
        });

        async function loadCategories() {
            try {
                const r = await api.get('/blogs/categories');
                if (r.success && r.data.length) {
                    const tabs = document.getElementById('categoryTabs');
                    r.data.forEach(c => {
                        const btn = document.createElement('button');
                        btn.className = 'cat-btn';
                        btn.dataset.cat = c.value;
                        btn.textContent = c.label + ' (' + c.count + ')';
                        btn.onclick = () => selectCategory(c.value, btn);
                        tabs.appendChild(btn);
                    });
                }
            } catch (e) { console.error(e); }
        }

        function selectCategory(cat, btn) {
            document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            currentCategory = cat;
            currentPage = 1;
            loadBlogs();
        }

        async function loadFeatured() {
            try {
                const r = await api.get('/blogs?featured=true&limit=3');
                if (r.success && r.data.length) {
                    document.getElementById('featuredSection').style.display = 'block';
                    const grid = document.getElementById('featuredGrid');
                    const main = r.data[0];
                    const side = r.data.slice(1, 3);

                    let html = `
                        <a href="blog_detail.html?slug=${main.slug}" class="featured-main">
                            ${main.coverImage ? `<img src="${main.coverImage}" alt="${main.title}">` : ''}
                            <div class="overlay">
                                <span class="cat-tag">${catLabels[main.category] || main.category}</span>
                                <h2>${main.title}</h2>
                                <p>${main.excerpt || ''}</p>
                                <div class="meta">
                                    <span>${main.author?.name || 'Admin'}</span>
                                    <span>${formatDate(main.publishedAt)}</span>
                                </div>
                            </div>
                        </a>
                        <div class="featured-side">
                    `;
                    side.forEach(b => {
                        html += `
                            <a href="blog_detail.html?slug=${b.slug}" class="featured-small">
                                ${b.coverImage ? `<img src="${b.coverImage}" alt="${b.title}">` : ''}
                                <div class="overlay">
                                    <h3>${b.title}</h3>
                                    <div class="meta">${formatDate(b.publishedAt)}</div>
                                </div>
                            </a>
                        `;
                    });
                    html += '</div>';
                    grid.innerHTML = html;
                }
            } catch (e) { console.error(e); }
        }

        async function loadBlogs() {
            const search = document.getElementById('searchInput').value;
            let url = '/blogs?page=' + currentPage + '&limit=9';
            if (currentCategory) url += '&category=' + currentCategory;
            if (search) url += '&search=' + encodeURIComponent(search);

            try {
                const r = await api.get(url);
                if (r.success) {
                    totalPages = r.totalPages;
                    renderBlogs(r.data);
                    renderPagination(r.currentPage, r.totalPages);
                }
            } catch (e) {
                document.getElementById('blogGrid').innerHTML = '<div class="empty-state" style="grid-column:1/-1"><h3>Bağlantı hatası</h3><p>Blog yazıları yüklenemedi</p></div>';
            }
        }

        function renderBlogs(blogs) {
            const grid = document.getElementById('blogGrid');
            if (!blogs.length) {
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column:1/-1">
                        <svg viewBox="0 0 24 24"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
                        <h3>Henüz blog yazısı yok</h3>
                        <p>Yakında yeni içerikler eklenecek</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = blogs.map(b => `
                <article class="blog-card">
                    <a href="blog_detail.html?slug=${b.slug}">
                        <div class="blog-card-image">
                            ${b.coverImage ? `<img src="${b.coverImage}" alt="${b.title}">` : ''}
                            <span class="cat-tag">${catLabels[b.category] || b.category}</span>
                        </div>
                        <div class="blog-card-content">
                            <h3>${b.title}</h3>
                            <p>${b.excerpt || ''}</p>
                            <div class="meta">
                                <div class="author">
                                    <div class="author-avatar">${(b.author?.name || 'A').substring(0, 2).toUpperCase()}</div>
                                    <span>${b.author?.name || 'Admin'}</span>
                                </div>
                                <span>${formatDate(b.publishedAt)}</span>
                            </div>
                        </div>
                    </a>
                </article>
            `).join('');
        }

        function renderPagination(current, total) {
            if (total <= 1) {
                document.getElementById('pagination').innerHTML = '';
                return;
            }
            let html = `<button class="page-btn" onclick="goPage(${current - 1})" ${current <= 1 ? 'disabled' : ''}>←</button>`;
            for (let i = 1; i <= total; i++) {
                if (i === 1 || i === total || (i >= current - 1 && i <= current + 1)) {
                    html += `<button class="page-btn ${i === current ? 'active' : ''}" onclick="goPage(${i})">${i}</button>`;
                }
            }
            html += `<button class="page-btn" onclick="goPage(${current + 1})" ${current >= total ? 'disabled' : ''}>→</button>`;
            document.getElementById('pagination').innerHTML = html;
        }

        function goPage(p) {
            if (p < 1 || p > totalPages) return;
            currentPage = p;
            loadBlogs();
            window.scrollTo({ top: 400, behavior: 'smooth' });
        }

        function formatDate(d) {
            if (!d) return '';
            return new Date(d).toLocaleDateString('tr-TR', { day: 'numeric', month: 'long', year: 'numeric' });
        }

        function debounce(fn, ms) { let t; return (...a) => { clearTimeout(t); t = setTimeout(() => fn(...a), ms); }; }
    </script>
</body>

</html>